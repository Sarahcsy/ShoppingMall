webpackJsonp([4],{WYNu:function(t,e){},mRsl:function(t,e,a){"use strict";e.b=function(t,e){return Object(r.a)({url:"/pro/category/"+t,method:"get",params:e})},e.a=function(t){return Object(r.a)({url:"/productCategory/create",method:"post",data:t})},e.c=function(t){return Object(r.a)({url:"/productCategory/"+t,method:"get"})};var r=a("vLgD")},yhur:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("woOf"),n=a.n(r),o=a("mRsl"),i={categoryName:"",navStatus:null,categorys:null,productAttributeIdList:[]},c={props:{isEdit:{type:Boolean,default:!1}},data:function(){return{productCate:n()({},i),selectProductCateList:[],rules:{categoryName:[{required:!0,message:"请输入分类名称",trigger:"blur"},{min:2,max:14,message:"长度在 2 到 14 个字符",trigger:"blur"}]},list:[{categoryId:"0001",categoryName:"外套",categoryLevel:"一级",navStatus:"显示",showStatus:"显示"},{categoryId:"0001",categoryName:"外套",categoryLevel:"一级",navStatus:"显示",showStatus:"显示"},{categoryId:"0001",categoryName:"外套",categoryLevel:"一级",navStatus:"显示",showStatus:"显示"}],offset:0,limit:20,count:0,currentPage:1}},created:function(){var t=this;this.isEdit?Object(o.c)(this.categoryId).then(function(e){t.productCate=e.data}):this.productCate=n()({},i),this.getSelectProductCateList(),this.resetcategoryId(),this.getList()},watch:{$route:function(t){this.resetcategoryId(),this.getList()}},methods:{handleResetSearch:function(){this.productCate=n()({},i)},getList:function(){var t=this;this.listLoading=!0,Object(o.b)(this.categoryId,this.productCate).then(function(e){t.listLoading=!1,t.list=e.data.list,t.total=e.data.total})},resetcategoryId:function(){null!=this.$route.query.categoryId?this.categoryId=this.$route.query.categoryId:this.categoryId=0},getProductAttributeIdList:function(){for(var t=[],e=0;e<this.filterProductAttrList.length;e++){var a=this.filterProductAttrList[e];null!==a.value&&2===a.value.length&&t.push(a.value[1])}return t},handleShowNextLevel:function(t,e){this.$router.push({path:"/product/product_cate/add_cate",categoryId:e.id})},handleUpdate:function(t,e){var a=this;Object(o.c)(this.categoryId).then(function(t){a.productCate=t.data})},handleDelete:function(t,e){var a=this;this.$confirm("是否要删除该分类","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){deleteProductCate(e.categoryId).then(function(t){a.$message({message:"删除成功",type:"success",duration:1e3}),a.getList()})})},getSelectProductCateList:function(){var t=this;Object(o.b)(1,{pageSize:100,pageNum:1}).then(function(e){t.selectProductCateList=e.data.list,t.selectProductCateList.unshift({id:0,name:"无上级分类"})})},handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleCurrentChange:function(t){this.currentPage=t,this.offset=(t-1)*this.limit},handleSaveList:function(){var t=this;this.$refs[formName].validate(function(e){if(!e)return t.$message({message:"验证失败",type:"error",duration:1e3}),!1;t.$confirm("是否提交数据","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.productCate.productAttributeIdList=t.getProductAttributeIdList(),Object(o.a)(t.productCate).then(function(e){t.$refs[formName].resetFields(),t.resetForm(formName),t.$message({message:"提交成功",type:"success",duration:1e3})})})})},handleSelectionChange:function(){}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-card",{staticStyle:{background:"#f2f2f2"},attrs:{shadow:"never"}},[a("div",[a("i",{staticClass:"el-icon-circle-plus-outline"}),t._v(" "),a("span",[t._v("添加分类")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.handleSaveList("productCateFrom")}}},[t._v("\n                保存\n            ")]),t._v(" "),a("el-button",{staticStyle:{float:"right","margin-right":"15px"},attrs:{size:"small"},on:{click:function(e){return t.handleResetSearch()}}},[t._v("\n                重置\n            ")])],1),t._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-form",{ref:"productCateFrom",attrs:{inline:!0,size:"small","label-width":"140px",model:t.productCate,rules:t.rules}},[a("el-form-item",{attrs:{label:"分类名称："}},[a("el-input",{staticStyle:{width:"203px"},attrs:{placeholder:"分类名称"},model:{value:t.productCate.categoryName,callback:function(e){t.$set(t.productCate,"categoryName",e)},expression:"productCate.categoryName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"上级分类："}},[a("el-select",{staticStyle:{width:"203px"},attrs:{placeholder:"全部",clearable:""},model:{value:t.productCate.categorys,callback:function(e){t.$set(t.productCate,"categorys",e)},expression:"productCate.categorys"}},t._l(t.selectProductCateList,function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"显示在导航栏："}},[a("el-radio-group",{model:{value:t.productCate.navStatus,callback:function(e){t.$set(t.productCate,"navStatus",e)},expression:"productCate.navStatus"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1)],1)],1)]),t._v(" "),a("div",{staticClass:"table-container"},[a("el-table",{ref:"productTable",staticStyle:{width:"100%"},attrs:{"highlight-current-row":"","header-cell-style":{background:"#f2f2f2",color:"#606266","border-bottom":"1px rgb(103, 194, 58) solid"},data:t.list,border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"60",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"编号",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.categoryId))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"分类名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.categoryName))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"级别",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.categoryLevel))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"导航栏",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(a){return t.handleNavStatusChange(e.$index,e.row)}},model:{value:e.row.navStatus,callback:function(a){t.$set(e.row,"navStatus",a)},expression:"scope.row.navStatus"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"260",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",disabled:t._f("disableNextLevel")(e.row.level)},on:{click:function(a){return t.handleShowNextLevel(e.$index,e.row)}}},[t._v("查看下级\n                    ")]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleUpdate(e.$index,e.row)}}},[t._v("编辑\n                    ")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("删除\n                    ")])]}}])})],1),t._v(" "),a("div",{staticClass:"Pagination",staticStyle:{"text-align":"left","margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":20,layout:"total, prev, pager, next",total:t.count},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(c,l,!1,function(t){a("WYNu")},"data-v-e07ac42c",null);e.default=s.exports}});
//# sourceMappingURL=4.4f2c4d65fdad8ddff875.js.map