webpackJsonp([1],{"4m5M":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l,r=a("woOf"),i=a.n(r),u=a("bOdI"),s=a.n(u),n=a("mRsl"),o=(l={name:"ProductInfoDetail",props:{value:Object,isEdit:{type:Boolean,default:!1}},created:function(){var t=this;this.isEdit&&getProduct(this.$route.query.id).then(function(e){t.productParam=e.data})},data:function(){return{hasEditCreated:!1,CateId:null,productCateOptions:[],brandOptions:[],rules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}],description:[{required:!0,message:"请输入商品描述",trigger:"blur"}],brandId:[{required:!0,message:"请选择商品品牌",trigger:"blur"}],productSn:[{required:!0,message:"请输入商品编号",trigger:"blur"}],requiredProp:[{required:!0,message:"该项为必填项",trigger:"blur"}]}}}},s()(l,"created",function(){this.getProductCateList()}),s()(l,"computed",{productId:function(){return this.value.id}}),s()(l,"watch",{CateId:function(t){null!=t&&2==t.length?this.CateId=t[1]:this.CateId=0}}),s()(l,"methods",{getProductCateList:function(){var t=this;Object(n.e)().then(function(e){for(var a=e.data,l=function(e){Object(n.d)(a[e].categoryId).then(function(l){a[e].children=l.data;var r=[];if(null!=a[e].children&&a[e].children.length>0)for(var i=0;i<a[e].children.length;i++)r.push({label:a[e].children[i].categoryName,value:a[e].children[i].categoryId});t.productCateOptions.push({label:a[e].categoryName,value:a[e].categoryId,children:r})})},r=0;r<a.length;r++)l(r)})},handleNext:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return e.$message({message:"验证失败",type:"error",duration:1e3}),!1;e.$emit("nextStep")})}}),l),c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"50px"}},[a("el-form",{ref:"productInfoForm",staticStyle:{width:"600px"},attrs:{model:t.value,rules:t.rules,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"商品分类："}},[a("el-cascader",{attrs:{"expand-trigger":"click",clearable:"",options:t.productCateOptions,"change-on-select":""},model:{value:t.CateId,callback:function(e){t.CateId=e},expression:"CateId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品名称：",prop:"name"}},[a("el-input",{model:{value:t.value.name,callback:function(e){t.$set(t.value,"name",e)},expression:"value.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品编号：",prop:"productSn"}},[a("el-input",{model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"成本："}},[a("el-input",{model:{value:t.value.originalPrice,callback:function(e){t.$set(t.value,"originalPrice",e)},expression:"value.originalPrice"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品售价："}},[a("el-input",{model:{value:t.value.price,callback:function(e){t.$set(t.value,"price",e)},expression:"value.price"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"市场价："}},[a("el-input",{model:{value:t.value.originalPrice,callback:function(e){t.$set(t.value,"originalPrice",e)},expression:"value.originalPrice"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品库存："}},[a("el-input",{model:{value:t.value.stock,callback:function(e){t.$set(t.value,"stock",e)},expression:"value.stock"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"计量单位："}},[a("el-input",{model:{value:t.value.unit,callback:function(e){t.$set(t.value,"unit",e)},expression:"value.unit"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品重量："}},[a("el-input",{staticStyle:{width:"300px"},model:{value:t.value.weight,callback:function(e){t.$set(t.value,"weight",e)},expression:"value.weight"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"20px"}},[t._v("克")])],1),t._v(" "),a("el-form-item",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(e){return t.handleNext("productInfoForm")}}},[t._v("下一步，填写商品属性")])],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(o,c,!1,function(t){a("LKgK")},"data-v-d807638c",null).exports,v={name:"ProductAttrDetail",props:{value:Object,isEdit:{type:Boolean,default:!1}},data:function(){return{hasEditCreated:!1,productAttributeCategoryOptions:[],selectProductAttr:[],selectProductParam:[],selectProductAttrPics:[],addProductAttrValue:"",activeHtmlName:"pc"}},computed:{hasAttrPic:function(){return!(this.selectProductAttrPics.length<1)},productId:function(){return this.value.id},selectProductPics:{get:function(){var t=[];if(void 0===this.value.pic||null==this.value.pic||""===this.value.pic)return t;if(t.push(this.value.pic),void 0===this.value.albumPics||null==this.value.albumPics||""===this.value.albumPics)return t;for(var e=this.value.albumPics.split(","),a=0;a<e.length;a++)t.push(e[a]);return t},set:function(t){if(null==t||0===t.length)this.value.pic=null,this.value.albumPics=null;else if(this.value.pic=t[0],this.value.albumPics="",t.length>1)for(var e=1;e<t.length;e++)this.value.albumPics+=t[e],e!==t.length-1&&(this.value.albumPics+=",")}}},created:function(){this.getProductAttrCateList()},watch:{productId:function(t){this.isEdit&&(this.hasEditCreated||void 0!==t&&null!=t&&0!==t&&this.handleEditCreated())}},methods:{handleEditCreated:function(){null!=this.value.productAttributeCategoryId&&this.handleProductAttrChange(this.value.productAttributeCategoryId),this.hasEditCreated=!0},getProductAttrCateList:function(){var t=this;fetchProductAttrCateList({pageNum:1,pageSize:100}).then(function(e){t.productAttributeCategoryOptions=[];for(var a=e.data.list,l=0;l<a.length;l++)t.productAttributeCategoryOptions.push({label:a[l].name,value:a[l].id})})},getProductAttrList:function(t,e){var a=this;fetchProductAttrList(e,{pageNum:1,pageSize:100,type:t}).then(function(e){var l=e.data.list;if(0===t){a.selectProductAttr=[];for(var r=0;r<l.length;r++){var i=[],u=[];a.isEdit&&(1===l[r].handAddStatus&&(i=a.getEditAttrOptions(l[r].id)),u=a.getEditAttrValues(r)),a.selectProductAttr.push({id:l[r].id,name:l[r].name,handAddStatus:l[r].handAddStatus,inputList:l[r].inputList,values:u,options:i})}a.isEdit&&a.refreshProductAttrPics()}else{a.selectProductParam=[];for(var s=0;s<l.length;s++){var n=null;a.isEdit&&(n=a.getEditParamValue(l[s].id)),a.selectProductParam.push({id:l[s].id,name:l[s].name,value:n,inputType:l[s].inputType,inputList:l[s].inputList})}}})},getEditAttrOptions:function(t){for(var e=[],a=0;a<this.value.productAttributeValueList.length;a++){var l=this.value.productAttributeValueList[a];if(l.productAttributeId===t){for(var r=l.value.split(","),i=0;i<r.length;i++)e.push(r[i]);break}}return e},getEditAttrValues:function(t){var e=[];if(0===t)for(var a=0;a<this.value.skuStockList.length;a++){var l=this.value.skuStockList[a];null!=l.sp1&&-1===e.indexOf(l.sp1)&&e.push(l.sp1)}else if(1===t)for(var r=0;r<this.value.skuStockList.length;r++){var i=this.value.skuStockList[r];null!=i.sp2&&-1===e.indexOf(i.sp2)&&e.push(i.sp2)}else for(var u=0;u<this.value.skuStockList.length;u++){var s=this.value.skuStockList[u];null!=s.sp3&&-1===e.indexOf(s.sp3)&&e.push(s.sp3)}return e},getEditParamValue:function(t){for(var e=0;e<this.value.productAttributeValueList.length;e++)if(t===this.value.productAttributeValueList[e].productAttributeId)return this.value.productAttributeValueList[e].value},handleProductAttrChange:function(t){this.getProductAttrList(0,t),this.getProductAttrList(1,t)},getInputListArr:function(t){return t.split(",")},handleAddProductAttrValue:function(t){var e=this.selectProductAttr[t].options;null!=this.addProductAttrValue&&""!=this.addProductAttrValue?-1===e.indexOf(this.addProductAttrValue)?(this.selectProductAttr[t].options.push(this.addProductAttrValue),this.addProductAttrValue=null):this.$message({message:"属性值不能重复",type:"warning",duration:1e3}):this.$message({message:"属性值不能为空",type:"warning",duration:1e3})},handleRemoveProductAttrValue:function(t,e){this.selectProductAttr[t].options.splice(e,1)},getProductSkuSp:function(t,e){return 0===e?t.sp1:1===e?t.sp2:t.sp3},handleRefreshProductSkuList:function(){var t=this;this.$confirm("刷新列表将导致sku信息重新生成，是否要刷新","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.refreshProductAttrPics(),t.refreshProductSkuList()})},handleSyncProductSkuPrice:function(){var t=this;this.$confirm("将同步第一个sku的价格到所有sku,是否继续","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(null!==t.value.skuStockList&&t.value.skuStockList.length>0)for(var e=t.value.skuStockList[0].price,a=0;a<t.value.skuStockList.length;a++)t.value.skuStockList[a].price=e})},refreshProductSkuList:function(){this.value.skuStockList=[];var t=this.value.skuStockList;if(1===this.selectProductAttr.length)for(var e=this.selectProductAttr[0].values,a=0;a<e.length;a++)t.push({sp1:e[a]});else if(2===this.selectProductAttr.length)for(var l=this.selectProductAttr[0].values,r=this.selectProductAttr[1].values,i=0;i<l.length;i++)if(0!==r.length)for(var u=0;u<r.length;u++)t.push({sp1:l[i],sp2:r[u]});else t.push({sp1:l[i]});else for(var s=this.selectProductAttr[0].values,n=this.selectProductAttr[1].values,o=this.selectProductAttr[2].values,c=0;c<s.length;c++)if(0!==n.length)for(var d=0;d<n.length;d++)if(0!==o.length)for(var v=0;v<o.length;v++)t.push({sp1:s[c],sp2:n[d],sp3:o[v]});else t.push({sp1:s[c],sp2:n[d]});else t.push({sp1:s[c]})},refreshProductAttrPics:function(){if(this.selectProductAttrPics=[],this.selectProductAttr.length>=1)for(var t=this.selectProductAttr[0].values,e=0;e<t.length;e++){var a=null;this.isEdit&&(a=this.getProductSkuPic(t[e])),this.selectProductAttrPics.push({name:t[e],pic:a})}},getProductSkuPic:function(t){for(var e=0;e<this.value.skuStockList.length;e++)if(t===this.value.skuStockList[e].sp1)return this.value.skuStockList[e].pic;return null},mergeProductAttrValue:function(){this.value.productAttributeValueList=[];for(var t=0;t<this.selectProductAttr.length;t++){var e=this.selectProductAttr[t];1===e.handAddStatus&&null!=e.options&&e.options.length>0&&this.value.productAttributeValueList.push({productAttributeId:e.id,value:this.getOptionStr(e.options)})}for(var a=0;a<this.selectProductParam.length;a++){var l=this.selectProductParam[a];this.value.productAttributeValueList.push({productAttributeId:l.id,value:l.value})}},mergeProductAttrPics:function(){for(var t=0;t<this.selectProductAttrPics.length;t++)for(var e=0;e<this.value.skuStockList.length;e++)this.value.skuStockList[e].sp1===this.selectProductAttrPics[t].name&&(this.value.skuStockList[e].pic=this.selectProductAttrPics[t].pic)},getOptionStr:function(t){for(var e="",a=0;a<t.length;a++)e+=t[a],a!=t.length-1&&(e+=",");return e},handleRemoveProductSku:function(t,e){var a=this.value.skuStockList;1===a.length?a.pop():a.splice(t,1)},getParamInputList:function(t){return t.split(",")},handlePrev:function(){this.$emit("prevStep")},handleNext:function(){this.$emit("nextStep")},handleFinishCommit:function(){this.$emit("finishCommit",this.isEdit)}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"50px"}},[a("el-form",{ref:"productAttrForm",staticStyle:{width:"720px"},attrs:{model:t.value,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"属性类型："}},[a("el-select",{attrs:{placeholder:"请选择属性类型"},on:{change:t.handleProductAttrChange},model:{value:t.value.productAttributeCategoryId,callback:function(e){t.$set(t.value,"productAttributeCategoryId",e)},expression:"value.productAttributeCategoryId"}},t._l(t.productAttributeCategoryOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"商品规格："}},[a("el-card",{staticClass:"cardBg",attrs:{shadow:"never"}},t._l(t.selectProductAttr,function(e,l){return a("div",{key:l},[t._v("\n          "+t._s(e.name)+"：\n          "),0===e.handAddStatus?a("el-checkbox-group",{model:{value:t.selectProductAttr[l].values,callback:function(e){t.$set(t.selectProductAttr[l],"values",e)},expression:"selectProductAttr[idx].values"}},t._l(t.getInputListArr(e.inputList),function(t){return a("el-checkbox",{key:t,staticClass:"littleMarginLeft",attrs:{label:t}})}),1):a("div",[a("el-checkbox-group",{model:{value:t.selectProductAttr[l].values,callback:function(e){t.$set(t.selectProductAttr[l],"values",e)},expression:"selectProductAttr[idx].values"}},t._l(t.selectProductAttr[l].options,function(e,r){return a("div",{key:e,staticClass:"littleMarginLeft",staticStyle:{display:"inline-block"}},[a("el-checkbox",{key:e,attrs:{label:e}}),t._v(" "),a("el-button",{staticClass:"littleMarginLeft",attrs:{type:"text"},on:{click:function(e){return t.handleRemoveProductAttrValue(l,r)}}},[t._v("删除\n                ")])],1)}),0),t._v(" "),a("el-input",{staticStyle:{width:"160px","margin-left":"10px"},attrs:{clearable:""},model:{value:t.addProductAttrValue,callback:function(e){t.addProductAttrValue=e},expression:"addProductAttrValue"}}),t._v(" "),a("el-button",{staticClass:"littleMarginLeft",on:{click:function(e){return t.handleAddProductAttrValue(l)}}},[t._v("增加")])],1)],1)}),0),t._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.value.skuStockList,border:""}},[t._l(t.selectProductAttr,function(e,l){return a("el-table-column",{key:e.id,attrs:{label:e.name,align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(t.getProductSkuSp(e.row,l))+"\n          ")]}}])})}),t._v(" "),a("el-table-column",{attrs:{label:"销售价格",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.price,callback:function(a){t.$set(e.row,"price",a)},expression:"scope.row.price"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"商品库存",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.stock,callback:function(a){t.$set(e.row,"stock",a)},expression:"scope.row.stock"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"库存预警值",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.lowStock,callback:function(a){t.$set(e.row,"lowStock",a)},expression:"scope.row.lowStock"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"SKU编号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.skuCode,callback:function(a){t.$set(e.row,"skuCode",a)},expression:"scope.row.skuCode"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleRemoveProductSku(e.$index,e.row)}}},[t._v("删除\n            ")])]}}])})],2),t._v(" "),a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:t.handleRefreshProductSkuList}},[t._v("刷新列表\n      ")]),t._v(" "),a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:t.handleSyncProductSkuPrice}},[t._v("同步价格\n      ")])],1),t._v(" "),a("el-form-item",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{size:"medium"},on:{click:t.handlePrev}},[t._v("上一步，填写商品信息")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.handleNext}},[t._v("下一步，填写商品促销")])],1)],1)],1)},staticRenderFns:[]};var h=a("VU/8")(v,p,!1,function(t){a("t7S4")},"data-v-b92380d2",null).exports,m={name:"ProductSaleDetail",props:{value:Object,isEdit:{type:Boolean,default:!1}},data:function(){return{pickerOptions1:{disabledDate:function(t){return t.getTime()<Date.now()}}}},created:function(){var t=this;this.isEdit||fetchMemberLevelList({defaultStatus:0}).then(function(e){for(var a=[],l=0;l<e.data.length;l++){var r=e.data[l];a.push({memberLevelId:r.id,memberLevelName:r.name})}t.value.memberPriceList=a})},computed:{selectServiceList:{get:function(){var t=[];if(void 0===this.value.serviceIds||null==this.value.serviceIds||""===this.value.serviceIds)return t;for(var e=this.value.serviceIds.split(","),a=0;a<e.length;a++)t.push(Number(e[a]));return t},set:function(t){var e="";if(null!=t&&t.length>0){for(var a=0;a<t.length;a++)e+=t[a]+",";e.endsWith(",")&&(e=e.substr(0,e.length-1)),this.value.serviceIds=e}else this.value.serviceIds=null}}},methods:{handleEditCreated:function(){var t=this.value.serviceIds.split(",");console.log("handleEditCreated",t);for(var e=0;e<t.length;e++)this.selectServiceList.push(Number(t[e]))},handleRemoveProductLadder:function(t,e){var a=this.value.productLadderList;1===a.length?(a.pop(),a.push({count:0,discount:0,price:0})):a.splice(t,1)},handleAddProductLadder:function(t,e){var a=this.value.productLadderList;a.length<3?a.push({count:0,discount:0,price:0}):this.$message({message:"最多只能添加三条",type:"warning"})},handleRemoveFullReduction:function(t,e){var a=this.value.productFullReductionList;1===a.length?(a.pop(),a.push({fullPrice:0,reducePrice:0})):a.splice(t,1)},handleAddFullReduction:function(t,e){var a=this.value.productFullReductionList;a.length<3?a.push({fullPrice:0,reducePrice:0}):this.$message({message:"最多只能添加三条",type:"warning"})},handlePrev:function(){this.$emit("prevStep")},handleNext:function(){this.$emit("nextStep")}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"50px"}},[a("el-form",{ref:"productSaleForm",staticStyle:{width:"600px"},attrs:{model:t.value,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"商品上架："}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.value.publishStatus,callback:function(e){t.$set(t.value,"publishStatus",e)},expression:"value.publishStatus"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品推荐："}},[a("span",{staticStyle:{"margin-right":"10px"}},[t._v("新品")]),t._v(" "),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.value.newStatus,callback:function(e){t.$set(t.value,"newStatus",e)},expression:"value.newStatus"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"10px"}},[t._v("热销")]),t._v(" "),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.value.recommandStatus,callback:function(e){t.$set(t.value,"recommandStatus",e)},expression:"value.recommandStatus"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"10px"}},[t._v("特卖")]),t._v(" "),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.value.recommandStatus,callback:function(e){t.$set(t.value,"recommandStatus",e)},expression:"value.recommandStatus"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"10px"}},[t._v("季节")]),t._v(" "),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.value.recommandStatus,callback:function(e){t.$set(t.value,"recommandStatus",e)},expression:"value.recommandStatus"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"10px"}},[t._v("品牌")]),t._v(" "),a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.value.recommandStatus,callback:function(e){t.$set(t.value,"recommandStatus",e)},expression:"value.recommandStatus"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"服务保证："}},[a("el-checkbox-group",{model:{value:t.selectServiceList,callback:function(e){t.selectServiceList=e},expression:"selectServiceList"}},[a("el-checkbox",{attrs:{label:1}},[t._v("无忧退货")]),t._v(" "),a("el-checkbox",{attrs:{label:2}},[t._v("快速退款")]),t._v(" "),a("el-checkbox",{attrs:{label:3}},[t._v("免费包邮")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"商品关键字："}},[a("el-input",{model:{value:t.value.keywords,callback:function(e){t.$set(t.value,"keywords",e)},expression:"value.keywords"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"使用说明："}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.value.detailDesc,callback:function(e){t.$set(t.value,"detailDesc",e)},expression:"value.detailDesc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品备注："}},[a("el-input",{attrs:{type:"textarea",autoSize:!0},model:{value:t.value.note,callback:function(e){t.$set(t.value,"note",e)},expression:"value.note"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"选择优惠方式："}},[a("el-radio-group",{attrs:{size:"small"},model:{value:t.value.promotionType,callback:function(e){t.$set(t.value,"promotionType",e)},expression:"value.promotionType"}},[a("el-radio-button",{attrs:{label:0}},[t._v("无优惠")]),t._v(" "),a("el-radio-button",{attrs:{label:1}},[t._v("特惠促销")]),t._v(" "),a("el-radio-button",{attrs:{label:3}},[t._v("阶梯价格")]),t._v(" "),a("el-radio-button",{attrs:{label:4}},[t._v("满减价格")])],1)],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1===t.value.promotionType,expression:"value.promotionType===1"}]},[a("div",[t._v("\n        开始时间：\n        "),a("el-date-picker",{attrs:{"value-format":"timestamp",type:"datetime","picker-options":t.pickerOptions1,placeholder:"选择开始时间"},model:{value:t.value.promotionStartTime,callback:function(e){t.$set(t.value,"promotionStartTime",e)},expression:"value.promotionStartTime"}})],1),t._v(" "),a("div",{staticClass:"littleMargin"},[t._v("\n        结束时间：\n        "),a("el-date-picker",{attrs:{"value-format":"timestamp",type:"datetime","picker-options":t.pickerOptions1,placeholder:"选择结束时间"},model:{value:t.value.promotionEndTime,callback:function(e){t.$set(t.value,"promotionEndTime",e)},expression:"value.promotionEndTime"}})],1),t._v(" "),a("div",{staticClass:"littleMargin"},[t._v("\n        促销价格：\n        "),a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"输入促销价格"},model:{value:t.value.promotionPrice,callback:function(e){t.$set(t.value,"promotionPrice",e)},expression:"value.promotionPrice"}})],1)]),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3===t.value.promotionType,expression:"value.promotionType===3"}]},[a("el-table",{staticStyle:{width:"80%"},attrs:{data:t.value.productLadderList,border:""}},[a("el-table-column",{attrs:{label:"数量",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.count,callback:function(a){t.$set(e.row,"count",a)},expression:"scope.row.count"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"折扣",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.discount,callback:function(a){t.$set(e.row,"discount",a)},expression:"scope.row.discount"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleRemoveProductLadder(e.$index,e.row)}}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleAddProductLadder(e.$index,e.row)}}},[t._v("添加")])]}}])})],1)],1),t._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:4===t.value.promotionType,expression:"value.promotionType===4"}]},[a("el-table",{staticStyle:{width:"80%"},attrs:{data:t.value.productFullReductionList,border:""}},[a("el-table-column",{attrs:{label:"满",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.fullPrice,callback:function(a){t.$set(e.row,"fullPrice",a)},expression:"scope.row.fullPrice"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"立减",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.reducePrice,callback:function(a){t.$set(e.row,"reducePrice",a)},expression:"scope.row.reducePrice"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleRemoveFullReduction(e.$index,e.row)}}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleAddFullReduction(e.$index,e.row)}}},[t._v("添加")])]}}])})],1)],1),t._v(" "),a("el-form-item",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{size:"medium"},on:{click:t.handlePrev}},[t._v("上一步，填写商品属性")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.handleFinishCommit}},[t._v("完成，提交商品")])],1)],1)],1)},staticRenderFns:[]};var g={},b={name:"productDetail",components:{productInfo_detail:d,ProductSale_detail:a("VU/8")(m,f,!1,function(t){a("zuTm")},"data-v-3b8909ca",null).exports,productAttr_detail:h},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{active:0,productParam:i()({},g),showStatus:[!0,!1,!1]}},methods:{hideAll:function(){for(var t=0;t<this.showStatus.length;t++)this.showStatus[t]=!1},prevStep:function(){this.active>0&&this.active<this.showStatus.length&&(this.active--,this.hideAll(),this.showStatus[this.active]=!0)},nextStep:function(){this.active<this.showStatus.length-1&&(this.active++,this.hideAll(),this.showStatus[this.active]=!0)},finishCommit:function(t){var e=this;this.$confirm("是否要提交该产品","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t?updateProduct(e.$route.query.id,e.productParam).then(function(t){e.$message({type:"success",message:"提交成功",duration:1e3}),e.$router.back()}):createProduct(e.productParam).then(function(t){e.$message({type:"success",message:"提交成功",duration:1e3}),location.reload()})})}}},P={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"form-container",attrs:{shadow:"never"}},[a("el-steps",{attrs:{active:t.active,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:"填写商品信息"}}),t._v(" "),a("el-step",{attrs:{title:"填写商品属性"}}),t._v(" "),a("el-step",{attrs:{title:"填写商品促销"}})],1),t._v(" "),a("productInfo_detail",{directives:[{name:"show",rawName:"v-show",value:t.showStatus[0],expression:"showStatus[0]"}],attrs:{"is-edit":t.isEdit},on:{nextStep:t.nextStep},model:{value:t.productParam,callback:function(e){t.productParam=e},expression:"productParam"}}),t._v(" "),a("productAttr_detail",{directives:[{name:"show",rawName:"v-show",value:t.showStatus[1],expression:"showStatus[1]"}],attrs:{"is-edit":t.isEdit},on:{nextStep:t.nextStep,prevStep:t.prevStep},model:{value:t.productParam,callback:function(e){t.productParam=e},expression:"productParam"}}),t._v(" "),a("ProductSale_detail",{directives:[{name:"show",rawName:"v-show",value:t.showStatus[2],expression:"showStatus[2]"}],attrs:{"is-edit":t.isEdit},on:{nextStep:t.nextStep,prevStep:t.prevStep},model:{value:t.productParam,callback:function(e){t.productParam=e},expression:"productParam"}})],1)},staticRenderFns:[]};var k={name:"productAdd",components:{product_detail:a("VU/8")(b,P,!1,function(t){a("d00A")},"data-v-1b95ec3c",null).exports}},S={render:function(){var t=this.$createElement;return(this._self._c||t)("product_detail",{attrs:{"is-edit":!1}})},staticRenderFns:[]};var _=a("VU/8")(k,S,!1,function(t){a("EU81")},null,null);e.default=_.exports},"9bBU":function(t,e,a){a("mClu");var l=a("FeBl").Object;t.exports=function(t,e,a){return l.defineProperty(t,e,a)}},C4MV:function(t,e,a){t.exports={default:a("9bBU"),__esModule:!0}},EU81:function(t,e){},LKgK:function(t,e){},bOdI:function(t,e,a){"use strict";e.__esModule=!0;var l,r=a("C4MV"),i=(l=r)&&l.__esModule?l:{default:l};e.default=function(t,e,a){return e in t?(0,i.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},d00A:function(t,e){},mClu:function(t,e,a){var l=a("kM2E");l(l.S+l.F*!a("+E39"),"Object",{defineProperty:a("evD5").f})},t7S4:function(t,e){},zuTm:function(t,e){}});
//# sourceMappingURL=1.ad68a6c229c7222b3bcf.js.map