webpackJsonp([8],{GD2S:function(t,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=l("woOf"),n=l.n(a),o=l("mRsl"),i=l("UgCr"),r={pageNum:0,pageSize:20,productName:null,publishStatus:null,auditStatus:null,spu:null,discountRate:null,stock:null,score:null},u={data:function(){return{editSkuInfo:{dialogVisible:!1,productId:null,productSn:"",productAttributeCategoryId:null,stockList:[],productAttr:[],keyword:null},productCateOptions:[],listQuery:n()({},r),operateType:null,publishStatusOptions:[{label:"上架",value:0},{label:"下架",value:1}],verifyStatusOptions:[{label:"已通过",value:0},{label:"未通过",value:1}],operates:[{label:"全选",value:0},{label:"全部更改",value:1}],list:[{productName:"帽子",publishStatus:"上架",auditStatus:"审核",productCode:"1212324",pic:"无",price:"123",sale:1232,productSn:212322}],listLoading:!1,selectProductCateValue:null}},created:function(){this.getProductList(),this.getProductCateList()},watch:{selectProductCateValue:function(t){null!=t&&2==t.length?this.listQuery.productCategoryId=t[1]:this.listQuery.productCategoryId=null}},methods:{handleResetSearch:function(){this.selectProductCateValue=[],this.listQuery=n()({},r)},getProductList:function(){var t=this;Object(i.a)(this.listQuery).then(function(e){t.list=e.data.indata})},handleView:function(t,e){this.$router.push({path:"/product/product_list/product_info",query:{id:e.productId}})},getProductCateList:function(){var t=this;Object(o.c)().then(function(e){for(var l=e.data,a=function(e){t.productCateOptions.push({label:l[e].categoryName,value:l[e].categoryId}),Object(o.b)(l[e].categoryId).then(function(a){l[e].children=a.data;var n=[];if(null!=l[e].children&&l[e].children.length>0)for(var o=0;o<l[e].children.length;o++)n.push({label:l[e].children[o].categoryName,value:l[e].children[o].categoryId});for(var i=l[e].categoryName,r=0;r<l.length;r++)l[r].categoryName==i&&t.productCateOptions.splice(r,1);t.productCateOptions.unshift({label:l[e].categoryName,value:l[e].categoryId,children:n})})},n=0;n<l.length;n++)a(n)})},handleAddProduct:function(){this.$router.push({path:"/product/add_product"})},handleShowSkuEditDialog:function(t,e){var l=this;this.editSkuInfo.dialogVisible=!0,this.editSkuInfo.productId=e.id,this.editSkuInfo.productSn=e.productSn,this.editSkuInfo.productAttributeCategoryId=e.productAttributeCategoryId,this.editSkuInfo.keyword=null,fetchSkuStockList(e.id,{keyword:this.editSkuInfo.keyword}).then(function(t){l.editSkuInfo.stockList=t.data}),fetchProductAttrList(e.productAttributeCategoryId,{type:0}).then(function(t){l.editSkuInfo.productAttr=t.data.list})}}},s={render:function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"app-container"},[l("el-card",{staticClass:"filter-container",staticStyle:{background:"#f2f2f2"},attrs:{shadow:"never"}},[l("div",{staticStyle:{"margin-top":"15px"}},[l("el-form",{attrs:{inline:!0,model:t.listQuery,size:"small","label-width":"120px"}},[l("el-form-item",{attrs:{label:"商品名称："}},[l("el-input",{staticStyle:{width:"203px"},attrs:{placeholder:"All"},model:{value:t.listQuery.productName,callback:function(e){t.$set(t.listQuery,"productName",e)},expression:"listQuery.productName"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"商品编号："}},[l("el-input",{staticStyle:{width:"203px"},attrs:{placeholder:"All"},model:{value:t.listQuery.spu,callback:function(e){t.$set(t.listQuery,"spu",e)},expression:"listQuery.spu"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"上架状态："}},[l("el-select",{staticStyle:{width:"203px"},attrs:{placeholder:"All",clearable:""},model:{value:t.listQuery.publishStatus,callback:function(e){t.$set(t.listQuery,"publishStatus",e)},expression:"listQuery.publishStatus"}},t._l(t.publishStatusOptions,function(t){return l("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),l("el-form-item",{attrs:{label:"商品分类："}},[l("el-cascader",{staticStyle:{width:"203px"},attrs:{placeholder:"All","expand-trigger":"click",clearable:"",options:t.productCateOptions,"show-all-levels":!1},model:{value:t.listQuery.id,callback:function(e){t.$set(t.listQuery,"id",e)},expression:"listQuery.id"}})],1),t._v(" "),l("el-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",type:"primary"},on:{click:function(e){return t.handleAddProduct()}}},[t._v("\n        添加\n      ")]),t._v(" "),l("el-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.handleResetSearch()}}},[t._v("\n        重置\n      ")]),t._v(" "),l("el-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.handleSearchList()}}},[t._v("\n        查询\n      ")])],1)],1)]),t._v(" "),l("div",{staticClass:"table-container"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"productTable",attrs:{"highlight-current-row":"","header-cell-style":{background:"#f2f2f2",color:"#606266","border-bottom":"1px rgb(103, 194, 58) solid"},data:t.list,border:""}},[l("el-table-column",{attrs:{type:"selection",width:"60",align:"center"}}),t._v(" "),l("el-table-column",{attrs:{type:"index",label:"编号",width:"60",align:"center"}}),t._v(" "),l("el-table-column",{attrs:{label:"商品编号",width:"140",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.spu))]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"商品名称",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("p",[t._v(t._s(e.row.productName))])]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"商品图片",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[l("img",{staticStyle:{height:"80px"},attrs:{src:t.row.mainImage}})]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"标签",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("div",[l("span",{staticStyle:{float:"left",width:"90px"}},[t._v("上架：")]),t._v(" "),l("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(l){return t.handlePublishStatusChange(e.$index,e.row)}},model:{value:e.row.publishStatus,callback:function(l){t.$set(e.row,"publishStatus",l)},expression:"scope.row.publishStatus"}})],1),t._v(" "),l("div",[l("span",{staticStyle:{float:"left",width:"90px"}},[t._v("推荐：")]),t._v(" "),l("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(l){return t.handleRecommendStatusChange(e.$index,e.row)}},model:{value:e.row.recommandStatus,callback:function(l){t.$set(e.row,"recommandStatus",l)},expression:"scope.row.recommandStatus"}})],1),t._v(" "),l("div",[l("span",{staticStyle:{float:"left",width:"90px"}},[t._v("可用优惠券：")]),t._v(" "),l("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(l){return t.handleNewStatusChange(e.$index,e.row)}},model:{value:e.row.newStatus,callback:function(l){t.$set(e.row,"newStatus",l)},expression:"scope.row.newStatus"}})],1)]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"SKU库存",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(l){return t.handleShowSkuEditDialog(e.$index,e.row)}}})]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"折扣比率",sortable:"",width:"140",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.discountRate)+"%")]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"商品评分",sortable:"",width:"140",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.score))]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"商品库存",sortable:"",width:"140",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.stock))]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"操作",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(l){return t.handleView(e.$index,e.row)}}},[t._v("查看")]),t._v(" "),l("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(l){return t.handleUpdate(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),l("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(l){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),l("div",{staticClass:"batch-operate-container"},[l("el-select",{attrs:{size:"small",placeholder:"批量操作"},model:{value:t.operateType,callback:function(e){t.operateType=e},expression:"operateType"}},t._l(t.operates,function(t){return l("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),l("el-button",{staticClass:"search-button",staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.handleBatchOperate()}}},[t._v("\n      确定\n    ")])],1),t._v(" "),l("el-dialog",{attrs:{title:"编辑货品信息",visible:t.editSkuInfo.dialogVisible,width:"70%"},on:{"update:visible":function(e){return t.$set(t.editSkuInfo,"dialogVisible",e)}}},[l("span",[t._v("商品货号：")]),t._v(" "),l("span",[t._v(t._s(t.editSkuInfo.productSn))]),t._v(" "),l("el-input",{staticStyle:{width:"50%","margin-left":"20px"},attrs:{placeholder:"按sku编号搜索",size:"small"},model:{value:t.editSkuInfo.keyword,callback:function(e){t.$set(t.editSkuInfo,"keyword",e)},expression:"editSkuInfo.keyword"}},[l("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.handleSearchEditSku},slot:"append"})],1),t._v(" "),l("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.editSkuInfo.stockList,border:""}},[l("el-table-column",{attrs:{label:"SKU编号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-input",{model:{value:e.row.skuCode,callback:function(l){t.$set(e.row,"skuCode",l)},expression:"scope.row.skuCode"}})]}}])}),t._v(" "),t._l(t.editSkuInfo.productAttr,function(e,a){return l("el-table-column",{key:e.id,attrs:{label:e.name,align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t.getProductSkuSp(e.row,a))+"\n        ")]}}])})}),t._v(" "),l("el-table-column",{attrs:{label:"销售价格",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-input",{model:{value:e.row.price,callback:function(l){t.$set(e.row,"price",l)},expression:"scope.row.price"}})]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"商品库存",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-input",{model:{value:e.row.stock,callback:function(l){t.$set(e.row,"stock",l)},expression:"scope.row.stock"}})]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"库存预警值",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-input",{model:{value:e.row.lowStock,callback:function(l){t.$set(e.row,"lowStock",l)},expression:"scope.row.lowStock"}})]}}])})],2),t._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(e){t.editSkuInfo.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:t.handleEditSkuConfirm}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=l("VU/8")(u,s,!1,function(t){l("LbWw")},"data-v-78defbf5",null);e.default=c.exports},LbWw:function(t,e){},UgCr:function(t,e,l){"use strict";e.a=function(t){return Object(a.a)({url:"/pro/info/getList",method:"get",params:t})},e.b=function(t){return Object(a.a)({url:"/pro/info/getDetail?id="+t,method:"get"})};var a=l("vLgD")}});
//# sourceMappingURL=8.79a53c1cc43386558bb9.js.map