webpackJsonp([7],{"4m5M":function(t,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=l("woOf"),r=l.n(a),n=l("mRsl"),i=l("3idm"),u={name:null,productSn:null,minPrice:null,maxPrice:null,originalPrice:null,stock:null,discountRate:0,detailHtml:null,attrName:null,productionDate:null,pic:null,html:null},s={created:function(){this.getProductCateList()},watch:{productId:function(t){this.isEdit&&(this.hasEditCreated||void 0!==t&&null!=t&&0!==t&&this.handleEditCreated())}},data:function(){return{AttrValues:[],values:[],selectProductParam:[],value:r()({},u),productCateOptions:[],AttrNameOptions:[],selectProductCategeryId:null,productAttributeCategoryId:null,time:"",pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}},rules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}],description:[{required:!0,message:"请输入商品描述",trigger:"blur"}],brandId:[{required:!0,message:"请选择商品品牌",trigger:"blur"}],productSn:[{required:!0,message:"请输入商品编号",trigger:"blur"}],requiredProp:[{required:!0,message:"该项为必填项",trigger:"blur"}]}}},methods:{showName:function(t){t.checked},getInputListArr:function(t){return t.split(",")},getAttribute:function(){var t=this;Object(i.c)(this.selectProductCategeryId[this.selectProductCategeryId.length-1]).then(function(e){var l=e.data;t.AttrNameOptions=[],t.AttrValues=[];for(var a=0;a<l.length;a++){t.AttrNameOptions.push({label:l[a].attrName,value:l[a].keyId});for(var r=[],n=0;n<l[a].attributeValues.length;n++)r.push({label:l[a].attributeValues[n].attrValue,value:l[a].attributeValues[n].attrKeyId});t.AttrValues.push(r)}})},handleRefreshProductSkuList:function(){var t=this;this.$confirm("刷新列表将导致sku信息重新生成，是否要刷新","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.refreshProductSkuList()})},handleSyncProductSkuPrice:function(){},refreshProductAttrPics:function(){if(this.selectProductAttrPics=[],this.AttrNameOptions.length>=1)for(var t=this.AttrNameOptions[0].value,e=0;e<t.length;e++){var l=null;this.isEdit&&(l=this.getProductSkuPic(t[e])),this.selectProductAttrPics.push({name:t[e],pic:l})}},getProductSkuSp:function(t,e){return 0===e?t.sp1:1===e?t.sp2:t.sp3},refreshProductSkuList:function(){this.value.skuStockList=[];var t=this.value.skuStockList;if(1===this.AttrNameOptions.length)for(var e=this.AttrValues.label,l=0;l<e.length;l++)t.push({sp1:e[l]});else if(2===this.AttrNameOptions.length)for(var a=this.AttrValues[0].label,r=this.AttrValues[1].label,n=0;n<a.length;n++)if(0!==r.length)for(var i=0;i<r.length;i++)t.push({sp1:a[n],sp2:r[i]});else t.push({sp1:a[n]});else for(var u=this.AttrValues[0].label,s=this.AttrValues[1].label,o=this.AttrValues[2].label,c=0;c<u.length;c++)if(0!==s.length)for(var d=0;d<s.length;d++)if(0!==o.length)for(var p=0;p<o.length;p++)t.push({sp1:u[c],sp2:s[d],sp3:o[p]});else t.push({sp1:u[c],sp2:s[d]});else t.push({sp1:u[c]})},getProductCateList:function(){var t=this;Object(n.c)().then(function(e){for(var l=e.data,a=function(e){Object(n.b)(l[e].categoryId).then(function(a){l[e].children=a.data;for(var r=[],n=0;n<l[e].children.length;n++)r.push({label:l[e].children[n].categoryName,value:l[e].children[n].categoryId});t.productCateOptions.push({label:l[e].categoryName,value:l[e].categoryId,children:r})})},r=0;r<l.length;r++)a(r)})},handleEditCreated:function(){null!=this.value.productAttributeCategoryId&&this.handleProductAttrChange(this.value.productAttributeCategoryId)},handleProductAttrChange:function(t){},getEditParamValue:function(t){for(var e=0;e<this.value.productAttributeValueList.length;e++)if(t===this.value.productAttributeValueList[e].productAttributeId)return this.value.productAttributeValueList[e].value},handleSaveList:function(){},handleCancelList:function(){}}},o={render:function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("el-card",{staticClass:"form-container",attrs:{shadow:"never"}},[l("div",{staticStyle:{width:"900px"}},[l("el-form",{ref:"productInfoForm",staticStyle:{width:"700px"},attrs:{model:t.value,"inline-message":"",rules:t.rules,"label-width":"120px",size:"small"}},[l("el-form-item",{attrs:{label:"商品分类：",prop:"categoryId"}},[l("el-cascader",{attrs:{"expand-trigger":"click",clearable:"",options:t.productCateOptions,"show-all-levels":!1},on:{change:t.getAttribute},model:{value:t.selectProductCategeryId,callback:function(e){t.selectProductCategeryId=e},expression:"selectProductCategeryId"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"商品名称：",prop:"name"}},[l("el-input",{staticClass:"input-width",model:{value:t.value.name,callback:function(e){t.$set(t.value,"name",e)},expression:"value.name"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"商品编号：",prop:"productSn"}},[l("el-input",{staticClass:"input-width",model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"商品原价："}},[l("el-input",{staticClass:"input-width",model:{value:t.value.originalPrice,callback:function(e){t.$set(t.value,"originalPrice",e)},expression:"value.originalPrice"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"商品成本："}},[l("el-input",{staticClass:"input-width",model:{value:t.value.originalPrice,callback:function(e){t.$set(t.value,"originalPrice",e)},expression:"value.originalPrice"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"商品数量："}},[l("el-input",{staticClass:"input-width",model:{value:t.value.stock,callback:function(e){t.$set(t.value,"stock",e)},expression:"value.stock"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"商品折扣："}},[l("el-input",{staticClass:"input-width",model:{value:t.value.discountRate,callback:function(e){t.$set(t.value,"discountRate",e)},expression:"value.discountRate"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"可使用优惠券："}},[l("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.value.couponOption,callback:function(e){t.$set(t.value,"couponOption",e)},expression:"value.couponOption"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"商品规格："}},[l("el-card",{staticClass:"cardBg",attrs:{shadow:"never"}},t._l(t.AttrNameOptions,function(e,a){return l("div",{key:a},[l("el-button",{attrs:{type:"text"},model:{value:t.value.productAttributeCategoryId,callback:function(e){t.$set(t.value,"productAttributeCategoryId",e)},expression:"value.productAttributeCategoryId"}},[t._v("\n                                "+t._s(e.label)+":\n                            ")]),t._v(" "),l("div",[l("el-checkbox-group",{model:{value:t.values,callback:function(e){t.values=e},expression:"values"}},t._l(t.AttrValues[a],function(e,a,r){return l("el-checkbox",{key:r,staticClass:"littleMarginLeft",attrs:{label:e.label},on:{change:t.showName}},[t._v(t._s(e.label))])}),1)],1)],1)}),0),t._v(" "),l("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:t.handleRefreshProductSkuList}},[t._v("刷新列表")]),t._v(" "),l("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:t.handleSyncProductSkuPrice}},[t._v("同步价格")]),t._v(" "),l("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.value.skuStockList,border:""}},[t._l(t.AttrNameOptions,function(e){return l("el-table-column",{key:e.value,attrs:{label:e.label,align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(t.getProductSkuSp(e.row,t.index))+"\n                        ")]}}])})}),t._v(" "),l("el-table-column",{attrs:{label:"商品价格",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-input",{model:{value:e.row.price,callback:function(l){t.$set(e.row,"price",l)},expression:"scope.row.price"}})]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"商品数量",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-input",{model:{value:e.row.stock,callback:function(l){t.$set(e.row,"stock",l)},expression:"scope.row.stock"}})]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"SKU编号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-input",{model:{value:e.row.skuCode,callback:function(l){t.$set(e.row,"skuCode",l)},expression:"scope.row.skuCode"}})]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"操作",width:"90",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-button",{attrs:{type:"text"},on:{click:function(l){return t.handleRemoveProductSku(e.$index,e.row)}}},[t._v("删除\n                        ")])]}}])})],2)],1),t._v(" "),l("el-form-item",{attrs:{label:"商品描述："}},[l("el-input",{attrs:{type:"textarea",autoSize:!0},model:{value:t.value.html,callback:function(e){t.$set(t.value,"html",e)},expression:"value.html"}})],1),t._v(" "),l("el-form-item",{staticStyle:{"text-align":"center"}},[l("el-button",{staticStyle:{"margin-top":"20px"},attrs:{size:"small",type:"primary"},on:{click:t.handleSaveList}},[t._v("保存\n                ")]),t._v(" "),l("el-button",{staticStyle:{"margin-top":"20px"},attrs:{size:"small",type:"primary"},on:{click:t.handleCancelList}},[t._v("取消\n                ")])],1)],1)],1)])},staticRenderFns:[]};var c={name:"productAdd",components:{product_detail:l("VU/8")(s,o,!1,function(t){l("faZh")},"data-v-7ea35c2a",null).exports}},d={render:function(){var t=this.$createElement;return(this._self._c||t)("product_detail",{attrs:{"is-edit":!1}})},staticRenderFns:[]};var p=l("VU/8")(c,d,!1,function(t){l("EU81")},null,null);e.default=p.exports},EU81:function(t,e){},faZh:function(t,e){}});
//# sourceMappingURL=7.02c33b915cc1674cb5df.js.map